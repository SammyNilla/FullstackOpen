(this["webpackJsonpreact-practice"]=this["webpackJsonpreact-practice"]||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(16),c=n.n(u),o=n(6),i=n(3),l=function(e){var t=e.filter,n=e.handleChange;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:t,onChange:n}))},s=function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.inputValueName,onChange:e.handleNameChange})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:e.inputValueNumber,onChange:e.handleNumberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var t=e.person,n=e.handleClick,a=t.name,u=t.number,c=t.id;return r.a.createElement("div",null,a," ",u,r.a.createElement("button",{onClick:function(){return n(c)}},"delete"))},f=function(e){var t=e.persons,n=e.handleClick;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement(m,{key:e.name,person:e,handleClick:n})})))},d=n(2),p=n.n(d),h=n(4),v=n(5),b=n.n(v),g="/api/persons",E={getAll:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.a.get(g),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.post(g,t),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.put("".concat(g,"/").concat(t),n),e.next=3,a;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.a.delete("".concat(g,"/").concat(t)),e.next=3,n;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=(n(40),function(e){var t=e.details;return null===t.message?null:r.a.createElement("div",{className:t.type},t.message)}),j=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],u=t[1],c=Object(a.useState)({message:null,type:"notif"}),m=Object(i.a)(c,2),d=m[0],p=m[1];Object(a.useEffect)((function(){E.getAll().then((function(e){u(e)}))}),[]);var h=Object(a.useState)(""),v=Object(i.a)(h,2),b=v[0],g=v[1],j=n.filter((function(e){return e.name.toLowerCase().includes(b)})),O=Object(a.useState)(""),y=Object(i.a)(O,2),C=y[0],k=y[1],N=Object(a.useState)(""),x=Object(i.a)(N,2),S=x[0],T=x[1],V=function(e,t){E.update(e,t).then((function(a){if(!a)return Promise.reject("Information of ".concat(t.name," has already been removed from the server."));u(n.map((function(t){return t.id!==e?t:a}))),k(""),T("");var r={message:"".concat(t.name," has updated their number."),type:"notif"};p(r),setTimeout((function(){p({message:null})}),3e3)})).catch((function(t){if(t.response){var a={message:"".concat(t.response.data.error),type:"error"};return p(a),void setTimeout((function(){p({message:null})}),5e3)}u(n.filter((function(t){return t.id!==e}))),p({message:t,type:"error"}),setTimeout((function(){p({message:null})}),5e3)}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(w,{details:d}),r.a.createElement(l,{filter:b,handleChange:function(e){g(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(s,{handleSubmit:function(e){e.preventDefault();var t={name:C,number:S},a=n.find((function(e){return e.name===t.name}));if(a){var r=Object(o.a)(Object(o.a)({},a),{},{number:S});window.confirm("".concat(C," is already added to the phonebook, replace the old number with a new one?"))&&V(a.id,r)}else E.create(t).then((function(e){u(n.concat(e)),k(""),T("");var a={message:"Added ".concat(t.name,"."),type:"notif"};p(a),setTimeout((function(){p({message:null})}),3e3)})).catch((function(e){var t={message:"".concat(e.response.data.error),type:"error"};p(t),setTimeout((function(){p({message:null})}),5e3)}))},inputValueName:C,handleNameChange:function(e){k(e.target.value)},inputValueNumber:S,handleNumberChange:function(e){T(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(f,{persons:j,handleClick:function(e){var t=n.filter((function(t){return t.id===e}))[0];window.confirm("Delete ".concat(t.name," ?"))&&E.remove(e).then((function(t){u(n.filter((function(t){return t.id!==e})))}))}}))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.936a5a4f.chunk.js.map