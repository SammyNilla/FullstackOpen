{"version":3,"sources":["Component/Filter.js","Component/PersonForm.js","Component/Person.js","Component/Persons.js","Services/Persons.js","App.js","index.js"],"names":["Filter","filter","handleChange","value","onChange","PersonForm","props","handleSubmit","onSubmit","inputValueName","handleNameChange","inputValueNumber","handleNumberChange","type","Person","person","handleClick","name","number","id","onClick","Persons","persons","map","p","key","baseUrl","getAll","a","request","axios","get","response","data","create","newObject","post","update","put","remove","delete","Notification","details","message","className","App","useState","setPersons","notifDetails","setNotifDetails","useEffect","PersonsService","then","ret","newFilter","setNewFilter","filteredPersons","toLowerCase","includes","newName","setNewName","newNumber","setNewNumber","updatePerson","Promise","reject","newNotif","setTimeout","catch","err","error","event","target","preventDefault","personDetails","find","updatedPerson","window","confirm","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.936a5a4f.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({filter, handleChange}) => {\r\n  return (\r\n    <div>filter shown with <input value={filter} onChange={handleChange} /></div>\r\n  )\r\n};\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst PersonForm = (props) => {\r\n  const {handleSubmit} = props;\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <div>name: <input value={props.inputValueName} onChange={props.handleNameChange} /></div>\r\n      <div>number: <input value={props.inputValueNumber} onChange={props.handleNumberChange} /></div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n};\r\n\r\nexport default PersonForm;","import React from 'react';\r\n\r\nconst Person = ({person, handleClick}) => {\r\n  const {name, number, id} = person;\r\n  return (\r\n    <div>\r\n      {name} {number}\r\n      <button onClick={() => handleClick(id)}>delete</button>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Person;","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst Persons = ({persons, handleClick}) => {\r\n  return (\r\n    <div>\r\n    {persons.map(p =>\r\n      <Person key={p.name} person={p} handleClick={handleClick} />\r\n    )}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default Persons;","import axios from 'axios';\r\n\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = async () => {\r\n  const request = axios.get(baseUrl);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst create = async (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst update = async (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  const response = await request;\r\n  return response.data;\r\n}\r\n\r\nconst remove = async (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nexport default { getAll, create, update, remove };","import React, { useState, useEffect } from 'react';\n\nimport Filter from './Component/Filter';\nimport PersonForm from './Component/PersonForm';\nimport Persons from './Component/Persons';\n\nimport PersonsService from './Services/Persons';\n\nimport './index.css'\n\nconst Notification = ({details}) => {\n  if (details.message === null) {\n    return null;\n  }\n\n  return (\n    <div className={details.type}>\n      {details.message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]);\n  const [ notifDetails, setNotifDetails ] = useState({message: null, type: 'notif'});\n\n  useEffect(() => {\n    PersonsService\n      .getAll()\n      .then(ret => {\n        setPersons(ret)\n      })\n  }, []);\n\n  const [ newFilter, setNewFilter ] = useState('');\n  const filteredPersons = persons.filter(person => person.name.toLowerCase().includes(newFilter));\n  const handleNewFilter = (event) => {\n    setNewFilter(event.target.value);\n  };\n\n  const [ newName, setNewName ] = useState('');\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const [ newNumber, setNewNumber ] = useState('');\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personDetails = {name: newName, number: newNumber};\n    const person = persons.find(p => p.name === personDetails.name);\n    if (person) {\n      const updatedPerson = {...person, number: newNumber};\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)) {\n        updatePerson(person.id, updatedPerson);\n      }\n      return;\n    }\n\n    PersonsService\n      .create(personDetails)\n      .then(ret => {\n        setPersons(persons.concat(ret))\n        setNewName('');\n        setNewNumber('');\n        const newNotif = {\n          message: `Added ${personDetails.name}.`,\n          type: 'notif'\n        };\n        setNotifDetails(newNotif);\n        setTimeout(() => {\n          setNotifDetails({message: null});\n        }, 3000);\n      })\n      .catch((err) => {\n        const newNotif = {\n          message: `${err.response.data.error}`,\n          type: 'error'\n        };\n        setNotifDetails(newNotif);\n        setTimeout(() => {\n          setNotifDetails({message: null});\n        }, 5000);\n      });\n  };\n\n  const updatePerson = (id, person) => {\n    PersonsService\n      .update(id, person)\n      .then((ret) => {\n        // In the event that the person is deleted from the backend prior to it being updated \n        // on the front end, we need to check that the return value is not null.\n        if (!ret) {\n          return Promise.reject(`Information of ${person.name} has already been removed from the server.`);\n        }\n        setPersons(persons.map(p => p.id !== id ? p : ret));\n        setNewName('');\n        setNewNumber('');\n        const newNotif = {\n          message: `${person.name} has updated their number.`,\n          type: 'notif'\n        };\n        setNotifDetails(newNotif);\n        setTimeout(() => {\n          setNotifDetails({message: null});\n        }, 3000);\n      })\n      .catch((err) => {\n        // Validation error case\n        if (err.response) {\n          const newNotif = {\n            message: `${err.response.data.error}`,\n            type: 'error'\n          };\n          setNotifDetails(newNotif);\n          setTimeout(() => {\n            setNotifDetails({message: null});\n          }, 5000);\n          return;\n        }\n        // User already deleted case\n        setPersons(persons.filter(p => p.id !== id));\n        const newNotif = {\n          message: err,\n          type: 'error'\n        };\n        setNotifDetails(newNotif);\n        setTimeout(() => {\n          setNotifDetails({message: null});\n        }, 5000);\n      });\n  };\n\n  const removePerson = (id) => {\n    const person = persons.filter(p => p.id === id)[0];\n    if (window.confirm(`Delete ${person.name} ?`)) {\n      PersonsService\n      .remove(id)\n      .then(ret => {\n        setPersons(persons.filter(p => p.id !== id))\n      });\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification details={notifDetails} />\n      <Filter filter={newFilter} handleChange={handleNewFilter} />\n      <h3>add a new</h3>\n      <PersonForm handleSubmit={addPerson} \n                  inputValueName={newName} handleNameChange={handleNameChange} \n                  inputValueNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <Persons persons={filteredPersons} handleClick={removePerson} />\n    </div>\n  )\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}